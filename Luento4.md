> [!NOTE]
> Materiaali on luotu ChatGPT:n ja Copilotin avulla.

# **üõ°Ô∏è Kehitysymp√§rist√∂n erist√§minen**

## **1. Mit√§ on sandboxing?**

**Sandboxing** tarkoittaa erist√§mist√§: ohjelmaa, prosessia tai sovellusta ajetaan hallitussa, rajatussa ymp√§rist√∂ss√§, jossa se ei voi vahingoittaa muuta j√§rjestelm√§√§.

### **Historia ja tausta**

* **1960‚Äì1970-luku:** Ensimm√§iset moniajo- ja monik√§ytt√§j√§j√§rjestelm√§t (esim. UNIX) loivat tarpeen erist√§√§ k√§ytt√§jien prosessit toisistaan.
* **1990-luku:** Internetin kasvu toi uuden riskin ‚Äì haitallinen koodi saattoi tulla selaimen kautta. Ensimm√§iset "sandbox-selainratkaisut" (esim. Java Applet sandbox).
* **2000‚Äì2010-luku:** Turvallisuusuhkien kasvu ja virtualisointiteknologioiden kehitys johtivat kehittyneisiin sandbox-ratkaisuihin (esim. Google Chrome k√§ytti jokaiselle v√§lilehdelle omaa sandboxia).
* **Nyky√§√§n:** Sandboxing on olennainen osa sovellusturvaa, haittaohjelmien analyysi√§ ja pilvipohjaista infrastruktuuria.

### **Miksi sandboxingia k√§ytet√§√§n?**

* Suojaa j√§rjestelm√§√§ haitalliselta koodilta.
* Mahdollistaa ep√§luotettavan ohjelman turvallisen testauksen.
* Mahdollistaa kehitt√§jille ohjelmien ajon hallitussa ymp√§rist√∂ss√§.

---

## **2. Virtualisointi ja sen muodot sandboxingin yhteydess√§**

Sandboxing liittyy tiiviisti virtualisointiin, sill√§ molemmat perustuvat erist√§miseen. Virtualisointi voidaan toteuttaa eri tasoilla:

### **Koneella teht√§v√§ virtualisointi**

Koko k√§ytt√∂j√§rjestelm√§ tai sen osa eristet√§√§n ajamaan virtuaalisesti.

* **Tekniikka:** Hypervisorit (esim. Type 1 = suoraan rautaan, Type 2 = k√§ytt√∂j√§rjestelm√§n p√§√§ll√§).
* **Esimerkki tuotenimi:**

  * **VirtualBox** (Type 2 hypervisor): Mahdollistaa useiden k√§ytt√∂j√§rjestelmien ajamisen yhdell√§ koneella.

### **Konttipohjainen virtualisointi**

Kevyempi eristystekniikka, jossa sovellukset ja niiden riippuvuudet pakataan konttiin. Kontit jakavat k√§ytt√∂j√§rjestelm√§n ytimen, mutta pysyv√§t erill√§√§n toisistaan.

* **Tekniikka:** Namespacet ja cgroups (Linux).
* **Esimerkki tuotenimi:**

  * **Docker**: Suosituin konttialusta, mahdollistaa sovellusten siirrett√§vyyden ja skaalautuvuuden.

### **Pilvipalveluissa tapahtuva virtualisointi**

Pilvipalveluntarjoajat hy√∂dynt√§v√§t virtualisointia ja konttiteknologioita skaalautuvien palveluiden tarjoamiseen.

* **Esimerkki tuotenimi√§ (Azure):**

  * **Azure Virtual Machines (VMs):** Tarjoaa perinteist√§ virtuaalikonepohjaista virtualisointia pilvess√§. K√§ytt√§j√§ saa k√§ytt√∂√∂ns√§ oman virtuaalipalvelimen.
  * **Azure Container Instances / Azure Kubernetes Service (AKS):** Tarjoaa konttiteknologiaa pilvess√§, mahdollistaen Docker-konttien ja orkestroinnin ilman, ett√§ tarvitsee hallita omia palvelimia.

---

## **3. Vertailu**

| Ratkaisu                            | Taso                 | Eristys                        | Hy√∂dyt                                                | Esimerkki                |
| ----------------------------------- | -------------------- | ------------------------------ | ----------------------------------------------------- | ------------------------ |
| **VirtualBox**                      | Kone / OS            | T√§ysi (oma k√§ytt√∂j√§rjestelm√§)  | Voidaan ajaa eri k√§ytt√∂j√§rjestelmi√§, hyv√§ testaukseen | VirtualBox               |
| **Docker**                          | Sovellus / Container | Kevyt (sama ydin jaettu)       | Nopea, kevyt, siirrett√§v√§                             | Docker                   |
| **Azure Virtual Machines**          | Pilvi / VM           | T√§ysi (virtuaalikone pilvess√§) | Skaalautuva, valmis infra                             | Azure VMs                |
| **Azure Container Tech (AKS, ACI)** | Pilvi / Container    | Kevyt (kontit pilvess√§)        | Nopea k√§ytt√∂√∂notto, integroitu pilvipalveluihin       | Azure Kubernetes Service |

---

üëâ N√§in saadaan kokonaiskuva: **Sandboxing** on ajatus turvallisesta erist√§misest√§, ja sen toteutus voi tapahtua koneella (VirtualBox), konttina (Docker), tai pilvess√§ (Azure VMs, Azure konttiteknologia).

---

# **üß© Sandboxing ohjelmoinnissa ja ohjelmistokehityksess√§**

## **1. Testaus ja kehitysymp√§rist√∂t**

* **Sandbox** on tyypillinen termi ohjelmistokehityksess√§ kuvaamaan erillist√§ ymp√§rist√∂√§, jossa uutta koodia voidaan ajaa **ilman riski√§ rikkoa tuotantoa**.
* Esim. web-palveluissa on usein kolme ymp√§rist√∂√§:

  * **Dev** (kehitysymp√§rist√∂, nopeaa kokeilua varten)
  * **Test/Staging** (sandbox tuotantoa j√§ljittelev√§ ymp√§rist√∂, jossa kokeillaan uusia ominaisuuksia)
  * **Prod** (tuotantoymp√§rist√∂, oikeat k√§ytt√§j√§t)

üëâ Sandboxing tukee **Continuous Integration / Continuous Deployment (CI/CD)** -mallia, koska kehitt√§j√§t voivat kokeilla koodiaan turvallisesti ennen julkaisua.

---

## **2. Ohjelmakoodin ajaminen sandboxissa**

* Joissain kieliss√§ ja alustoissa voidaan ajaa koodia suoraan **rajoitetussa sandboxissa**.

  * **Java Virtual Machine (JVM):** Java Appletit ajettiin alun perin selaimessa sandboxissa.
  * **.NET CLR (Common Language Runtime):** Mahdollistaa koodin ajon hallitussa ymp√§rist√∂ss√§.
  * **Python / Node.js -sandboxit:** K√§ytet√§√§n esim. verkkopalveluissa, joissa k√§ytt√§j√§n sy√∂tt√§m√§√§ koodia pit√§√§ ajaa turvallisesti.

üëâ T√§rke√§, jos halutaan antaa mahdollisuus suorittaa pieni√§ koodinp√§tki√§ ilman, ett√§ ne p√§√§sev√§t k√§siksi koko j√§rjestelm√§√§n.

---

## **3. Sandbox ja automaattinen testaus**

* **Unit testit ja integraatiotestit** voidaan ajaa sandboxissa, jolloin:

  * Testit eiv√§t muuta tuotantodataa.
  * V√§√§r√§t muutokset voidaan resetoida nopeasti.
* **Tietokantatestaus:** K√§ytet√§√§n "sandbox-tietokantaa", joka on erillinen kopio tuotannosta.

---

## **4. Sandbox ja oppimisymp√§rist√∂t**

* Monissa opetusalustoissa (esim. repl.it, GitHub Codespaces, Azure Lab Services) koodi ajetaan sandboxissa.
* T√§m√§ mahdollistaa sen, ett√§ voidaan kokeilla ohjelmointia ilman, ett√§ koneelle tarvitsee asentaa mit√§√§n riskialtista.

---

## **5. Yhteys virtualisointiin**

* **VirtualBox sandbox:** Voidaan luoda erillinen testiymp√§rist√∂, jossa ajetaan uutta ohjelmaa. Jos ohjelma kaatuu ‚Üí ei haittaa, koska se ei riko is√§nt√§konetta.
* **Docker sandbox:** Kehitt√§j√§t voivat ajaa sovellusta kontissa, joka j√§ljittelee tuotantoymp√§rist√∂√§. N√§in varmistetaan, ett√§ ohjelma toimii samalla tavalla kehityksess√§ ja tuotannossa.
* **Azure sandbox:** Pilvipalveluissa kehitt√§jille tarjotaan usein **Azure Sandbox** -resursseja, joissa he voivat testata ilman kustannuksia.

---

## **6. Esimerkkiskenaario ohjelmoinnista**

* Kehitt√§j√§ tekee uuden API\:n k√§ytt√§en **Node.js + Docker**.
* H√§n ajaa koodinsa **sandbox-docker-kontissa**, jossa on my√∂s testitietokanta.
* CI/CD putki (esim. GitHub Actions) ajaa automaattisesti testit kontissa.
* Kun kaikki toimii ‚Üí koodi voidaan julkaista **Azure Virtual Machineen** tai **Azure Kubernetes Serviceen**.

---

## **üéØ Yhteenveto**

* Sandboxing = **turvallinen eristys**.
* Ohjelmoinnissa se tarkoittaa:

  * Kehitysymp√§rist√∂j√§ (Dev/Test/Prod).
  * Koodin ajamista rajatussa ymp√§rist√∂ss√§.
  * Automaattisen testauksen ja CI/CD\:n luotettavuutta.
  * Virtualisointi- ja konttiteknologioiden hy√∂dynt√§mist√§.

---

# **Debian-testikone Python-skriptin testausta varten**

## **üéØ Tarkoitus ja tavoite**

* **Tarkoitus:** luoda turvallinen, toistettava ‚Äúsandbox‚Äù, jossa Python-koodi voidaan asentaa, ajaa ja rikkoa ilman vaikutusta is√§nt√§koneeseen.
* **Tavoitteet:**

  1. vakioitu testialusta (Debian),
  2. Python-ymp√§rist√∂,
  3. helppo et√§kehitys VS Code + SSH,
  4. nopea palautus **snapshotilla**.

---

## **üß± Ymp√§rist√∂n arkkitehtuuri lyhyesti**

* **Host:** oma l√§pp√§ri/ty√∂asema (Windows/macOS/Linux) + VirtualBox.
* **Guest/VM:** Debian, OpenSSH server, Python.
* **Verkko:** Bridged.
* **Kehitys:** VS Code **Remote ‚Äì SSH** -liit√§nn√§inen.

---

## **üîß Esivaatimukset**

* [VirtualBox](https://www.virtualbox.org/wiki/Downloads)
* [Debian](https://www.debian.org/distrib/)
* [VS Code](https://code.visualstudio.com/) + **Remote ‚Äì SSH** -laajennus

---

## **üöÄ K√§ytt√∂√∂notto: VM pystyyn**

1. **Luo VM:** New ‚Üí Name: `py-sandbox-debian` ‚Üí Type: Linux ‚Üí Version: 'Debian' (64-bit).
2. **Resurssit:** Memory 4 GB, CPU 2‚Äì4 vCPU (riippuu koneesta).
3. **Levy:** 20 GB VDI, dynamically allocated.
4. **ISO:** Storage ‚Üí Controller IDE ‚Üí liit√§ Debian ISO.
5. **Verkko:** Network ‚Üí Adapter 1 = **Bridged adapter**
6. K√§ynnist√§ VM ja asenna Debian (valitse asennuksessa **OpenSSH server**).

---

## **üõ°Ô∏è Peruskonfiguraatio (guest/VM)**

Kirjaudu sis√§√§n VM\:lle root-k√§ytt√§j√§n√§ (konsoli).

```bash
# Asennetaan sudo (HUOM! k√§ytt√§j√§nimi on se, joka asennuksessa m√§√§riteltiin)
apt update && apt -y upgrade
apt install sudo
usermod -aG sudo k√§ytt√§j√§nimi

# Varmista SSH-palvelu
systemctl status ssh || systemctl enable --now ssh

# Kirjaudutaan SSH-yhteydell√§ j√§rjestelm√§√§n
# Vaihe 1: Tarkista Debian-koneen IP-osoite
ip a

# Vaihe 2: Avaa is√§nt√§k√§ytt√∂j√§rjestelm√§st√§ komentotulkki (Esim: Powershell)
# Vaihe 3: Annan komento
ssh k√§ytt√§j√§nimi@IP-osoite

# Esimerkkin√§
ssh linuxadmin@192.168.1.124
```

**Snapshot ennen testausta:**
VirtualBox ‚Üí VM ‚Üí **Take Snapshot** ‚Üí ‚Äúbase-clean‚Äù.

---

## **üîó Kytkent√§ VS Codeen (Remote ‚Äì SSH)**

**Is√§nt√§koneelle:**

1. Asenna **Remote ‚Äì SSH** -laajennus.
2. VS Code: **> Remote-SSH: Connect to the host...  ‚Üí  enter user@host ‚Üí enter password**.
3. Kun yhteys auki, avaa VM\:n kansio (`/home/k√§ytt√§j√§nimi`)

---

## **üêç Python-testiymp√§rist√∂**

Luo yksinkertainen Python-skripti VS Codella ja aja se VM\:ll√§

Luo kansio: **`app`**

```bash
# VM:ll√§ (Esim. VS Coden terminaalissa)
mkdir -p ~/app && cd ~/app
```

Luo tiedosto (Esim. VS Codella): **`main.py`**

```python
def add(a, b):
    return a + b

if __name__ == "__main__":
    print("Hello from VM! 2 + 3 =", add(2, 3))
```

**Aja:**

```bash
# VM:ll√§ (Esim. VS Coden terminaalissa)
python3 main.py
# odotettu tuloste:
# Hello from VM! 2 + 3 = 5
```

---

## **üîÅ Snapshot-ty√∂skentely**

* **Testauksen j√§lkeen:** Take Snapshot ‚Äúfirst-test-completed‚Äù.
* Jos ymp√§rist√∂ sotkeentuu: **Restore Snapshot** takaisin ‚Äúbase-clean‚Äù.

---

## **‚úÖ Tarkistuslista**

* [ ] VM pystyss√§, p√§ivitykset ajettu
* [ ] OpenSSH server p√§√§ll√§, **SSH toimii** (VS Code Remote ‚Äì SSH)
* [ ] Snapshot ‚Äúbase-clean‚Äù tallessa
* [ ] Visual Studio Code yhdistetty SSH-yhteydell√§
* [ ] Snapshot ‚Äúfirst-test-completed‚Äù tallessa

---